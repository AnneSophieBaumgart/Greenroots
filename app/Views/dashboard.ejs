<%- include('partials/header') %>

  <h1 class="dashboard">Bienvenue </h1>
  <section id="profil">
    <article class="user">
      <h2>Profil</h2>
      <h3>Nom : </h3>
      <p>
        <%= user.last_name %>
      </p>
      <h3>Prénom : </h3>
      <p>
        <%= user.first_name %>
      </p>
      <h3>Email :</h3>
      <p>
        <%= user.email %>
      </p>
    </article>

    <article class="trees">
      <% if (userRole === 'admin') { %>
        <h2>Gestion des arbres</h2>
        <div class="admin-actions">
          <a href="/trees/create" class="action-button">Ajouter un arbre</a>
          <a href="/trees" class="action-button">Voir tous les arbres</a>
          <a href="/users" class="action-button">Liste des utilisateurs</a>
        </div>
        <div class="tree-actions">
          <a href="/trees" class="action-button">Gérer les arbres</a>
        </div>
      <% } else { %>
        <h2>Mes arbres commandés</h2>
        <% if (user.UserHasTrees && user.UserHasTrees.length > 0) { %>
          <div class="tree-list">
            <% user.UserHasTrees.forEach(userTree => { %>
              <div class="tree-item">
                <h3><%= userTree.Tree.name %></h3>
                <% userTree.Tree.Places.forEach(place => { %>
                  <p>Planté à : <%= place.name %></p>
                  <p>Quantité : <%= place.PlaceHasPlant.quantity %></p>
                <% }) %>
                <a href="/trees/<%= userTree.Tree.id %>" class="details-button">Voir les détails</a>
              </div>
            <% }) %>
          </div>
        <% } else { %>
          <p class="no-items">Vous n'avez pas encore d'arbres commandés</p>
          <a href="/trees" class="action-button">Découvrir nos arbres</a>
        <% } %>
      <% } %>
    </article>
    <div class="profil_logout"><a href="/logout">Se déconnecter</a></div>


  </section>

  <%- include('partials/footer') %>